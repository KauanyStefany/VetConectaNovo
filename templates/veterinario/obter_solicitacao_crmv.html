<!-- {# TODO: Status da Solicitação de Verificação CRMV
   - Título: "Verificação de CRMV"
   - {% if verificacao %} (existe solicitação):
     Card mostrando:
     * Status atual: Badge colorido conforme status
       - 'pendente': badge bg-warning "Aguardando Análise"
       - 'em_analise': badge bg-info "Em Análise"
       - 'aprovado': badge bg-success "Aprovado ✓"
       - 'rejeitado': badge bg-danger "Rejeitado"
     * Data da solicitação: {{ verificacao.data_verificacao | data_br }}
     * Mensagem conforme status
     {% if verificacao.status_verificacao == 'pendente' %}
       Alert info: "Sua solicitação está em análise. Aguarde o retorno da administração."
     {% elif verificacao.status_verificacao == 'aprovado' %}
       Alert success: "Parabéns! Seu CRMV foi verificado. Você agora tem o selo verificado."
     {% elif verificacao.status_verificacao == 'rejeitado' %}
       Alert danger: "Sua solicitação foi rejeitada. Entre em contato com o suporte."
       Link: href="/veterinario/fazer_solicitacao_crmv" "Solicitar Novamente"
     {% endif %}
   - {% else %} (não existe):
     Alert info: "Você ainda não solicitou verificação de CRMV."
     Link: href="/veterinario/fazer_solicitacao_crmv" class="btn btn-verde" "Solicitar Verificação"
   Variáveis: request, verificacao (VerificacaoCRMV ou None)
   Referência: Estrutura única, mas ver outros templates para cards e alerts
#} -->
{% extends "base_publica.html" %}

{% block titulo %}Verificação de CRMV{% endblock %}

{% block conteudo %}
<div class="container my-5">
    <div class="col-md-8 mx-auto bg-white p-4 rounded shadow-sm">
        <h2 class="mb-3">Verificação de CRMV</h2>
        {% if verificacao %}
        <div class="card mb-3">
            <div class="card-body">
                <div class="d-flex justify-content-between align-items-start">
                    <div>
                        <h5 class="card-title mb-1">Solicitação #{{ verificacao.id or verificacao.id_solicitacao or '' }}</h5>
                        <p class="mb-1">
                            <strong>Data da solicitação:</strong>
                            {% if verificacao.data_verificacao %}{{ verificacao.data_verificacao | data_br }}
                {% elif verificacao.criado_em %}{{ verificacao.criado_em | data_br }}
                {% else %}-{% endif %}
                        </p>
                    </div>
                    <div>
                        {% set st = (verificacao.status_verificacao or verificacao.status or '').lower() %}
              {% if st == 'pendente' %}
                        <span class="badge bg-warning text-dark">Aguardando Análise</span>
                        {% elif st == 'em_analise' %}
                        <span class="badge bg-info text-dark">Em Análise</span>
                        {% elif st == 'aprovado' %}
                        <span class="badge bg-success">Aprovado ✓</span>
                        {% elif st == 'rejeitado' %}
                        <span class="badge bg-danger">Rejeitado</span>
                        {% else %}
                        <span class="badge bg-secondary">{{ verificacao.status_verificacao }}</span>
                        {% endif %}
                    </div>
                </div>
                {% if verificacao.mensagem %}
                <p class="mt-3 mb-0">
                    <strong>Observação:</strong> {{ verificacao.mensagem }}
                </p>
                {% endif %}
            </div>
        </div>
        {% if st == 'pendente' %}
        <div class="alert alert-info">Sua solicitação está em análise. Aguarde o retorno da administração.</div>
        {% elif st == 'em_analise' %}
        <div class="alert alert-info">Sua solicitação está sendo verificada pela equipe.</div>
        {% elif st == 'aprovado' %}
        <div class="alert alert-success">Parabéns! Seu CRMV foi verificado. Você agora tem o selo verificado no perfil.</div>
        {% elif st == 'rejeitado' %}
        <div class="alert alert-danger">Sua solicitação foi rejeitada. Entre em contato com o suporte para mais informações.</div>
        <a href="/veterinario/fazer_solicitacao_crmv" class="btn btn-verde">Solicitar Novamente</a>
        {% endif %}

    {% else %}
        <div class="alert alert-info">
            Você ainda não solicitou verificação de CRMV.
        </div>
        <p class="text-muted">Se o seu CRMV estiver cadastrado no perfil, você pode enviar uma solicitação para que a equipe verifique seu registro.</p>
        <a href="/veterinario/fazer_solicitacao_crmv" class="btn btn-verde">Solicitar Verificação</a>
        {% endif %}
    </div>
</div>
{% endblock %}
